## iOS通知权限如此"娇贵"？

### 系统权限的“唯一性”

- **一次性机会**：iOS 只允许系统权限弹窗显示一次，用户拒绝后 App 无法再次主动申请
- **无法自定义**：弹窗由系统控制，开发者无法自定义样式和文案
- **挽回较困难**：用户拒绝后，只能引导去“设置”手动开启，转化率极低

换句话说：**你只有一次机会让用户说“好”**。

```
UNUserNotificationCenter.current().requestAuthorization(options: [.alert, .sound, .badge]) { granted, error in
    // 这里决定了你所有推送功能的生死
}
```





## 一、为什么iOS通知权限如此关键？

### 1.1 系统级限制与挑战

- **一次性授权机制**：`requestAuthorization` 仅一次弹窗机会
- **静默授权选项**：`.provisional` 的适用场景（适合资讯类App）
- **权限挽回成本**：用户拒绝后需跳转系统设置，转化率<15%

### 1.2 数据驱动的权限获取策略

#### 黄金触发时机（AB测试结论）

| 触发场景           | 平均授权率 | 适用产品类型               |
| :----------------- | :--------- | :------------------------- |
| 用户完成核心功能后 | 62%        | 工具类（如健身记录保存后） |
| 首次获得社交互动时 | 71%        | 社区类（如收到点赞/评论）  |
| 触发高价值事件前   | 58%        | 电商类（如购物车商品降价） |

## 让用户说"好"的三大黄金法则

### 法则一：先约会，再求婚

千万别在 App 冷启动阶段就弹出权限请求。用户还没弄清你是谁，就要求授权通知——就像第一次见面就求婚，注定被拒。

更好的做法是：

> **等用户完成一次核心操作，再自然地引导开启通知。**

#### 💡 案例：某健身 App 的策略

1. 用户完成首次训练任务
2. 弹出提示框：“想记录你的每日进步吗？”
3. 提供两个选项：“稍后再说” 和 “接收进度提醒”

点击“接收提醒”后才触发系统通知权限请求。

此时用户已：

- 体验了产品的核心价值
- 理解了通知的作用
- 对 App 建立了初步信任

```
func showPermissionAfterWorkout() {
    let customAlert = CustomAlertView(
        title: "每日进步提醒",
        desc: "开启通知，接收训练记录和定制计划",
        confirmAction: { requestSystemPermission() }
    )
}
```

